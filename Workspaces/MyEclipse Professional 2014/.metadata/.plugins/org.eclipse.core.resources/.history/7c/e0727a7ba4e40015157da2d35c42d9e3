<%@ include file="head_without_jsp.jsp"%>
<%
String idKey = (String) request.getAttribute("destination");
if (idKey == null){
	idKey = "";
}
%>
<%
SeparatePage sp = (SeparatePage) request.getAttribute("sp");
String spStr = sp.getSeparateString();
HttpServletResponse resp=(HttpServletResponse) response;
List<Message> userList = sp.getSearchData();
String idKey = (String) request.getAttribute("destination");
String role = (String) session.getAttribute("role");
String cols = "4";
String isAdmin = null;
String userid = (String) session.getAttribute("currId");
%>
<div data-role="popup" id="myPopup" class="ui-content" style="min-width:250px;">
<div class="span14" id="datacontent">
					
		<table width="1100" class="table">
			<%if (userList != null && userList.size() != 0) {%>
			<p><tr>
			    <th>Date</th>
				<th>Sender</th>
				<th>Receiver</th>
				<th>Content</th>

			</tr></p>


			<%
				//to get from the database
								if (userList != null && userList.size() != 0)
								{
									for (int i = 0; i < userList.size(); i++)
									 {
										Message user = userList.get(i);
											String id = user.getId();
											int ori = user.getOrigin();
											int dest = user.getDestination();
											String content = user.getContent();
			%>

			<tr>
				<td><%=id%></td>
				<td><%=ori%></td>
				<td><%=dest%></td>
				<td><%=content%></td>

			</tr>
			<%
				}
			%>
			<tr>
				<td colspan="22"><%=spStr%></td>
			</tr>
			<%
				} 	
						else { out.println("<tr><td colspan='21'>not found </td></tr>");}
			}%>
			
		</table>
</div>
<div class="span10" id="datacontent">
<form id="form2" action="showMessage?method=show" data-rel="popup" method="post">	
<table>
						<thead>
							<tr>
								<th colspan="5">Search By Receiver Node:</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td class="span4">Node ID:</td>
								<td class="span1"><input type="text" name="destination" value="<%=idKey%>" /></td>
								<td class="span6">
									<button class="btn btn-primary" type="submit">Search</button>
								</td>
							</tr>
						</tbody>		
					</table>
					</form>
</div>
</body>
</html>